{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/code/src/components/BarChart.tsx\";\nimport React from 'react';\nimport * as d3 from 'd3';\nimport { useD3 } from './hooks/used3';\n\nfunction BarChart({\n  data\n}) {\n  const ref = useD3(svg => {\n    const height = 500;\n    const width = 500;\n    const margin = {\n      top: 20,\n      right: 30,\n      bottom: 30,\n      left: 40\n    };\n    const x = d3.scaleBand().domain(data.map(d => d.year)).rangeRound([margin.left, width - margin.right]).padding(0.1);\n    const y1 = d3.scaleLinear().domain([0, d3.max(data, d => d.sales)]).rangeRound([height - margin.bottom, margin.top]);\n\n    const xAxis = g => g.attr('transform', `translate(0,${height - margin.bottom})`).call(d3.axisBottom(x).tickValues(d3.ticks(...d3.extent(x.domain()), width / 40).filter(v => x(v) !== undefined)).tickSizeOuter(0));\n\n    const y1Axis = g => g.attr('transform', `translate(${margin.left},0)`).style('color', 'steelblue').call(d3.axisLeft(y1).ticks(null, 's')).call(g => g.select('.domain').remove()).call(g => g.append('text').attr('x', -margin.left).attr('y', 10).attr('fill', 'currentColor').attr('text-anchor', 'start').text(data.y1));\n\n    svg.select('.x-axis').call(xAxis);\n    svg.select('.y-axis').call(y1Axis);\n    svg.select('.plot-area').attr('fill', 'steelblue').selectAll('.bar').data(data).join('rect').attr('class', 'bar').attr('x', d => x(d.year)).attr('width', x.bandwidth()).attr('y', d => y1(d.sales)).attr('height', d => y1(0) - y1(d.sales));\n  }, [data.length]);\n  return /*#__PURE__*/_jsxDEV(\"svg\", {\n    ref: ref,\n    style: {\n      height: 500,\n      width: '100%',\n      marginRight: '0px',\n      marginLeft: '0px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"g\", {\n      className: \"plot-area\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n      className: \"x-axis\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n      className: \"y-axis\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 3\n  }, this);\n}\n\nexport default BarChart;","map":{"version":3,"sources":["/code/src/components/BarChart.tsx"],"names":["React","d3","useD3","BarChart","data","ref","svg","height","width","margin","top","right","bottom","left","x","scaleBand","domain","map","d","year","rangeRound","padding","y1","scaleLinear","max","sales","xAxis","g","attr","call","axisBottom","tickValues","ticks","extent","filter","v","undefined","tickSizeOuter","y1Axis","style","axisLeft","select","remove","append","text","selectAll","join","bandwidth","length","marginRight","marginLeft"],"mappings":"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","sourcesContent":["\nimport React from 'react';\nimport * as d3 from 'd3';\nimport {useD3} from './hooks/used3';\n\nfunction BarChart({ data }) {\n\tconst ref = useD3(\n\t\t(svg) => {\n\t\t\tconst height = 500;\n\t\t\tconst width = 500;\n\t\t\tconst margin = { top: 20, right: 30, bottom: 30, left: 40 };\n\n\t\t\tconst x = d3\n\t\t\t\t.scaleBand()\n\t\t\t\t.domain(data.map((d) => d.year))\n\t\t\t\t.rangeRound([margin.left, width - margin.right])\n\t\t\t\t.padding(0.1);\n\n\t\t\tconst y1 = d3\n\t\t\t\t.scaleLinear()\n\t\t\t\t.domain([0, d3.max(data, (d) => d.sales)])\n\t\t\t\t.rangeRound([height - margin.bottom, margin.top]);\n\n\t\t\tconst xAxis = (g) =>\n\t\t\t\tg.attr('transform', `translate(0,${height - margin.bottom})`).call(\n\t\t\t\t\td3\n\t\t\t\t\t\t.axisBottom(x)\n\t\t\t\t\t\t.tickValues(\n\t\t\t\t\t\t\td3\n\t\t\t\t\t\t\t\t.ticks(...d3.extent(x.domain()), width / 40)\n\t\t\t\t\t\t\t\t.filter((v) => x(v) !== undefined)\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.tickSizeOuter(0)\n\t\t\t\t);\n\n\t\t\tconst y1Axis = (g) =>\n\t\t\t\tg\n\t\t\t\t\t.attr('transform', `translate(${margin.left},0)`)\n\t\t\t\t\t.style('color', 'steelblue')\n\t\t\t\t\t.call(d3.axisLeft(y1).ticks(null, 's'))\n\t\t\t\t\t.call((g) => g.select('.domain').remove())\n\t\t\t\t\t.call((g) =>\n\t\t\t\t\t\tg\n\t\t\t\t\t\t\t.append('text')\n\t\t\t\t\t\t\t.attr('x', -margin.left)\n\t\t\t\t\t\t\t.attr('y', 10)\n\t\t\t\t\t\t\t.attr('fill', 'currentColor')\n\t\t\t\t\t\t\t.attr('text-anchor', 'start')\n\t\t\t\t\t\t\t.text(data.y1)\n\t\t\t\t\t);\n\n\t\t\tsvg.select('.x-axis').call(xAxis);\n\t\t\tsvg.select('.y-axis').call(y1Axis);\n\n\t\t\tsvg\n\t\t\t\t.select('.plot-area')\n\t\t\t\t.attr('fill', 'steelblue')\n\t\t\t\t.selectAll('.bar')\n\t\t\t\t.data(data)\n\t\t\t\t.join('rect')\n\t\t\t\t.attr('class', 'bar')\n\t\t\t\t.attr('x', (d) => x(d.year))\n\t\t\t\t.attr('width', x.bandwidth())\n\t\t\t\t.attr('y', (d) => y1(d.sales))\n                .attr('height', (d) => y1(0) - y1(d.sales));\n                \n\t\t},\n\t\t[data.length]\n\t);\n\n\treturn (\n\t\t<svg\n\t\t\tref={ref}\n\t\t\tstyle={{\n\t\t\t\theight: 500,\n\t\t\t\twidth: '100%',\n\t\t\t\tmarginRight: '0px',\n\t\t\t\tmarginLeft: '0px',\n\t\t\t}}\n\t\t>\n\t\t\t<g className=\"plot-area\" />\n\t\t\t<g className=\"x-axis\" />\n\t\t\t<g className=\"y-axis\" />\n\t\t</svg>\n\t);\n}\n\nexport default BarChart;\n"]},"metadata":{},"sourceType":"module"}